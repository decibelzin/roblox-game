local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- Vari√°veis para controlar o estado
local isWindowFocused = true
local lastFocusTime = 0
local altTabThreshold = 0.1 -- Tempo m√≠nimo para considerar como Alt + Tab

-- Fun√ß√£o chamada quando a janela perde o foco
local function onWindowFocusLost()
    isWindowFocused = false
    lastFocusTime = tick()
    print("‚ö†Ô∏è Jogador perdeu o foco da janela (poss√≠vel Alt + Tab)")
    
    -- Aqui voc√™ pode adicionar l√≥gica adicional quando detectar Alt + Tab
    -- Por exemplo: pausar o jogo, mostrar aviso, etc.
end

-- Fun√ß√£o chamada quando a janela ganha o foco
local function onWindowFocusGained()
    local currentTime = tick()
    local timeAway = currentTime - lastFocusTime
    
    if not isWindowFocused and timeAway > altTabThreshold then
        print("‚úÖ Jogador voltou para o jogo ap√≥s", string.format("%.2f", timeAway), "segundos")
        print("üéÆ Alt + Tab detectado!")
        
        -- Aqui voc√™ pode adicionar l√≥gica quando o jogador volta do Alt + Tab
        -- Por exemplo: retomar o jogo, mostrar notifica√ß√£o, etc.
    end
    
    isWindowFocused = true
end

-- Fun√ß√£o para detectar Alt + Tab atrav√©s de input (m√©todo alternativo)
local function onInputBegan(input, gameProcessed)
    if gameProcessed then return end
    
    -- Detecta se Alt est√° pressionado
    if input.KeyCode == Enum.KeyCode.LeftAlt or input.KeyCode == Enum.KeyCode.RightAlt then
        -- Aguarda um pouco para ver se Tab tamb√©m √© pressionado
        task.wait(0.1)
        
        if UserInputService:IsKeyDown(Enum.KeyCode.Tab) then
            print("üéØ Alt + Tab detectado via input!")
            -- L√≥gica adicional aqui
        end
    end
end

-- Conectar os eventos
UserInputService.WindowFocused:Connect(onWindowFocusGained)
UserInputService.WindowFocusReleased:Connect(onWindowFocusLost)
UserInputService.InputBegan:Connect(onInputBegan)

-- Fun√ß√£o para verificar se a janela est√° focada
local function isWindowCurrentlyFocused()
    return isWindowFocused
end

-- Fun√ß√£o para obter o tempo desde a √∫ltima perda de foco
local function getTimeSinceLastFocusLoss()
    if isWindowFocused then
        return 0
    else
        return tick() - lastFocusTime
    end
end

-- Exportar fun√ß√µes para uso em outros scripts
_G.AltTabDetector = {
    isWindowFocused = isWindowCurrentlyFocused,
    getTimeSinceFocusLoss = getTimeSinceLastFocusLoss
}

print("üîç Sistema de detec√ß√£o de Alt + Tab inicializado!")
